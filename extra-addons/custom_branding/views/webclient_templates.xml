<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Override Login Page -->
    <template id="login_custom_branding" inherit_id="web.login" name="Custom Branding Login">
        <!-- Add custom CSS with configured colors directly in the template body -->
        <xpath expr="//form" position="before">
            <style>
                :root {
                    --custom-primary-color: <t t-esc="request.env['ir.config_parameter'].sudo().get_param('custom_branding.primary_color', '#1E88E5')"/>;
                    --custom-secondary-color: <t t-esc="request.env['ir.config_parameter'].sudo().get_param('custom_branding.secondary_color', '#424242')"/>;
                    --custom-background-color: <t t-esc="request.env['ir.config_parameter'].sudo().get_param('custom_branding.background_color', '#F5F5F5')"/>;
                    --custom-text-color: <t t-esc="request.env['ir.config_parameter'].sudo().get_param('custom_branding.text_color', '#333333')"/>;
                }

                body {
                    background-color: var(--custom-background-color) !important;
                }

                .btn-primary {
                    background-color: var(--custom-primary-color) !important;
                    border-color: var(--custom-primary-color) !important;
                }

                .btn-primary:hover {
                    opacity: 0.9;
                }

                a {
                    color: var(--custom-primary-color) !important;
                }

                .text-primary {
                    color: var(--custom-primary-color) !important;
                }

                /* Limitar tamaño del logo */
                img[alt="Logo"] {
                    max-height: 80px !important;
                    max-width: 200px !important;
                    width: auto !important;
                }

                /* Ocultar "Powered by Odoo" y referencias */
                .o_login_powered_by,
                .o_footer_powered_by,
                a[href*="odoo.com"] {
                    display: none !important;
                }
            </style>

            <script type="text/javascript">
                // Reemplazar logo cuando se cargue la página
                document.addEventListener('DOMContentLoaded', function() {
                    var logos = document.querySelectorAll('img[alt="Logo"]');
                    logos.forEach(function(logo) {
                        logo.src = '/custom_branding/logo';
                    });
                });
            </script>
        </xpath>
    </template>

    <!-- TODO: Database selector and manager templates may not exist in Odoo 18
         Need to find correct template names or use different approach -->
</odoo>
