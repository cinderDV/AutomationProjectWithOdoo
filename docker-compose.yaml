version: '3.8'

services:
  odoo:
    # Construir desde Dockerfile personalizado que incluye odoo.conf
    build:
      context: .
      dockerfile: Dockerfile
    container_name: odoo_app
    ports:
      - "8069:8069"
    volumes:
      # Persistencia de archivos (imágenes, facturas, etc.)
      - odoo-data:/var/lib/odoo
      # Los addons ahora están dentro de la imagen (copiados en el Dockerfile)
      # No necesitamos montar extra-addons como volumen
    environment:
          - HOST=${HOST}
          - USER=${USER}
          - PASSWORD=${PASSWORD}
    restart: always
    networks:
      - coolify
networks:
  # Definimos que la red 'coolify' ya existe y no debe crearla de cero
  coolify:
    external: true
volumes:
  odoo-data:
